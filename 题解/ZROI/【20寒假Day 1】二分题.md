# 【20寒假Day 1】二分题

[传送门](http://www.zhengruioi.com/contest/531/problem/1266)

## 引理

如果这道题的p是给定的，如何选择p的编号使答案最大？一个极其类似的问题是：一棵树上选k个点，将这些点两两配对，每个配对对答案的贡献是两点之间的距离，如何配对使答案最大？

首先考虑树上的所有点都是p，那么一条边被计算次数的理论上限就是$min(sz[u],sz[v])*2$，如果所有p之间的连接都能经过重心，所有边的计算次数都能取到这个理论上界。

然后考虑树上部分点，那么当p点全部确定时，sz就可以确定，一条边的理论上界也可以确定。那么就可以得到和上面一样的结论。

所以我们证明了：当要加入答案的p之间的路径全部经过重心时答案最大，而且这个答案等于所有p到重心的距离*2

## 思路

有了这个引理，我们可以反过来考虑：可以考虑枚举重⼼是哪，然后找最远的$k$个点，并且没有⼀个⼦树超过$k/2$ 。这样是 $O\left(n^{2} \log n\right)$的。

