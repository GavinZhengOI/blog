# 51Nod1709 复杂度分析

[题目链接](https://www.51nod.com/Challenge/Problem.html#problemId=1709)

## 思路

一道很有意思的题。

我们考虑按位累计贡献。记录$dp[i][j]$为上一步倍增跳了$2^i$步，跳到了$i$点的所有状态"1"的个数和。

可以理解为，对于一个儿子`u`和他的祖先`v`的深度差，可以表示为一个二进制数。我们倍增的将`u`跳到`v`，每次跳的长度一定比上次小，且一定是$2^k$。

那么对于一个点`i`，上一步跳了$2^j$步，那么就$\forall k,k<j$，`dp[fa][k]+=dp[i][j]`。其中`fa`代表的是`i`第$2^k$个祖先。